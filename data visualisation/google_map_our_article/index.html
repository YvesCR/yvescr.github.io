<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Visualisation of my Google Map History - Data laborer</title>




<meta name="description" content="Exploration of the localisation data created when using google map">




<meta property="og:locale" content="en">
<meta property="og:site_name" content="Data laborer">
<meta property="og:title" content="Visualisation of my Google Map History">


  <link rel="canonical" href="https://yvescr.github.io/data%20visualisation/google_map_our_article/">
  <meta property="og:url" content="https://yvescr.github.io/data%20visualisation/google_map_our_article/">



  <meta property="og:description" content="Exploration of the localisation data created when using google map">



  <meta name="twitter:site" content="@SwiftAMHE">
  <meta name="twitter:title" content="Visualisation of my Google Map History">
  <meta name="twitter:description" content="Exploration of the localisation data created when using google map">
  <meta name="twitter:url" content="https://yvescr.github.io/data%20visualisation/google_map_our_article/">

  
    <meta name="twitter:card" content="summary">
    
  

  







  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-01-15T00:00:00+00:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Yves Crutain",
      "url" : "https://yvescr.github.io",
      "sameAs" : ["https://twitter.com/swiftamhe","https://www.linkedin.com/in/yves-crutain-0b430324"]
    }
  </script>






<!-- end SEO -->


<link href="https://yvescr.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Data laborer Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://yvescr.github.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://yvescr.github.io/">Data laborer</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://yvescr.github.io/portfolio/">List View</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://yvescr.github.io/categories/">Categories</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://yvescr.github.io/about/index.html">About</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    



<div id="main" role="main">
  

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Visualisation of my Google Map History">
    <meta itemprop="description" content="Exploration of the localisation data created when using google map">
    <meta itemprop="datePublished" content="January 15, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Visualisation of my Google Map History
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  15 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <h2 id="abstract">Abstract</h2>

<p>Recently, I needed a few localisation points to create a test for a visualization.</p>

<p>To create a real effect, I decided to see if I could use the data I create everyday when I use Google map.
Why I am not shy about these data? Simply because they are outdated due to the fact that I have recently moved. (It would be a shame to be robbed by a bugler expert in data because of a blog post :) ).</p>

<p>I ended to find a lot of interesting things:</p>

<ul>
  <li>Over two years, Google had stored 12K points with an associated time stamps.</li>
  <li>These data tells a lot on me:
    <ul>
      <li>Where I work</li>
      <li>Where I live</li>
      <li>My typical day</li>
      <li>How I move: by car, by bike or by foot.</li>
    </ul>
  </li>
</ul>

<p>All in all, this data set reflects pretty accurately my routine week and is perfect for advertisers and more. Well done, Google.</p>

<h2 id="presentation-of-the-dataset">Presentation of the Dataset</h2>

<p>I went to the <a href="https://takeout.google.com/settings/takeout">takeout manager</a> of my Google account to see if I could use the data from my Google map account.</p>

<p>The process is fairly easy and fast. In my case, I was able to get 12K coordinates over 2 years of use of Google products.</p>

<p>In addition of the coordinates, Google also provide a time stamp and a bunch of variables poorly completed: velocity, altitude, accuracy and activity with a reliability score.</p>

<h3 id="heat-map-of-my-historical-positions">Heat Map of my Historical Positions</h3>

<p>The data set is included in my github account. I have limited the data set to London and 2 years.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># load libraries:
</span><span class="n">pacman</span><span class="o">::</span><span class="n">p_load</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">,</span><span class="w"> </span><span class="n">ggmap</span><span class="p">,</span><span class="w"> </span><span class="n">scales</span><span class="p">)</span><span class="w">

</span><span class="c1">## read the json file:
</span><span class="n">json_file</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"C:/YCR Perso/mapassistant/data test/Takeout/Historique des positions/Historiquedespositions.json"</span><span class="w">
</span><span class="n">json_import_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jsonlite</span><span class="o">::</span><span class="n">fromJSON</span><span class="p">(</span><span class="n">txt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">json_file</span><span class="p">)</span><span class="w">

</span><span class="c1"># clean the dataset:
</span><span class="n">coord.df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">json_import_data</span><span class="o">$</span><span class="n">locations</span><span class="w">

</span><span class="c1"># we tidy the dataframe:
</span><span class="n">coord.df.lim</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">coord.df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
      </span><span class="n">mutate</span><span class="p">(</span><span class="n">lat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">latitudeE7</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">10000000</span><span class="p">,</span><span class="w"> </span><span class="n">lon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">longitudeE7</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">10000000</span><span class="p">,</span><span class="w">
          </span><span class="n">date_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.POSIXct</span><span class="p">(</span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">timestampMs</span><span class="p">)</span><span class="o">/</span><span class="m">1000</span><span class="p">,</span><span class="w">
            </span><span class="n">origin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1970-01-01"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">mutate</span><span class="p">(</span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.Date</span><span class="p">(</span><span class="n">date_time</span><span class="p">),</span><span class="w"> </span><span class="n">hour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">format</span><span class="p">(</span><span class="n">date_time</span><span class="p">,</span><span class="w"> </span><span class="s2">"%H"</span><span class="p">),</span><span class="w">
            </span><span class="n">day_week</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">format</span><span class="p">(</span><span class="n">date_time</span><span class="p">,</span><span class="w"> </span><span class="s2">"%a"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
      </span><span class="n">mutate</span><span class="p">(</span><span class="n">day_week</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">day_week</span><span class="p">,</span><span class="w">
            </span><span class="n">levels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Mon"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Tue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Wed"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Thu"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Fri"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Sat"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Sun"</span><span class="p">)))</span><span class="o">%&gt;%</span><span class="w">
      </span><span class="n">filter</span><span class="p">(</span><span class="n">lon</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">lon</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">-0.4</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">lat</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">51.6</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">lat</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">51.48</span><span class="p">)</span><span class="w">

</span><span class="c1"># limit to London:
</span><span class="n">coord.df.lim.2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">coord.df.lim</span><span class="w">  </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">select</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span><span class="w"> </span><span class="n">lat</span><span class="p">,</span><span class="w"> </span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">hour</span><span class="p">,</span><span class="w"> </span><span class="n">day_week</span><span class="p">)</span></code></pre></figure>

<p>The first thing to do with this data set is to create an heat map to visually assess the content.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># min amd max longitude in a specific variable:
</span><span class="n">mean_lon</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">coord.df.lim.2</span><span class="o">$</span><span class="n">lon</span><span class="p">)</span><span class="w">
</span><span class="n">mean_lat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">coord.df.lim.2</span><span class="o">$</span><span class="n">lat</span><span class="p">)</span><span class="w">
</span><span class="n">min_lon</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">coord.df.lim.2</span><span class="o">$</span><span class="n">lon</span><span class="p">)</span><span class="w">
</span><span class="n">min_lat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">coord.df.lim.2</span><span class="o">$</span><span class="n">lat</span><span class="p">)</span><span class="w">
</span><span class="n">max_lon</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">coord.df.lim.2</span><span class="o">$</span><span class="n">lon</span><span class="p">)</span><span class="w">
</span><span class="n">max_lat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">coord.df.lim.2</span><span class="o">$</span><span class="n">lat</span><span class="p">)</span><span class="w">

</span><span class="c1"># dl the map layer:
</span><span class="n">my_map</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggmap</span><span class="o">::</span><span class="n">get_map</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">min_lon</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0.01</span><span class="p">,</span><span class="w"> </span><span class="n">min_lat</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0.01</span><span class="p">,</span><span class="w">
                  </span><span class="n">max_lon</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">0.01</span><span class="p">,</span><span class="w"> </span><span class="n">max_lat</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">0.01</span><span class="p">),</span><span class="w">
                  </span><span class="n">maptype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"terrain"</span><span class="p">,</span><span class="w"> </span><span class="n">zoom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">11</span><span class="p">)</span><span class="w">

</span><span class="c1"># define the theme:
</span><span class="n">theme_map_london</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="c1">#axis.text = element_blank(),
</span><span class="w">        </span><span class="c1">#axis.ticks = element_blank(),
</span><span class="w">        </span><span class="n">panel.background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">(),</span><span class="w">
        </span><span class="n">plot.background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_blank</span><span class="p">())</span><span class="w">

</span><span class="c1"># number of points in grid
</span><span class="n">grid_point</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">100</span><span class="w">

</span><span class="c1"># plot the graph:
</span><span class="n">ggmap</span><span class="o">::</span><span class="n">ggmap</span><span class="p">(</span><span class="n">my_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
     </span><span class="n">geom_density2d</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coord.df.lim.2</span><span class="p">,</span><span class="w"> 
       </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lon</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lat</span><span class="p">),</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.3</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">stat_density2d</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coord.df.lim.2</span><span class="p">,</span><span class="w"> 
      </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lon</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lat</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">..level..</span><span class="p">)),</span><span class="w">
      </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">grid_point</span><span class="p">,</span><span class="w">
      </span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"polygon"</span><span class="p">,</span><span class="w">
      </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">scale_fill_gradient</span><span class="p">(</span><span class="s2">"Density\nlog scale"</span><span class="p">,</span><span class="w"> </span><span class="n">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"green"</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
    </span><span class="n">theme_map_london</span></code></pre></figure>

<p><img src="http://yvescr.github.io/assets/images/figures/source/2017-01-15-google_map_our_article/unnamed-chunk-4-1.png" alt="plot of chunk unnamed-chunk-4" /></p>

<p>Here, one difficulty is to interpret the density scale: What exactly are we representing?</p>

<h3 id="read-the-scale">Read the Scale</h3>

<p>The density is calculated at an exact point through a two-dimensional kernel density. It is estimated on a grid of, in that case, <code class="highlighter-rouge">100</code> * <code class="highlighter-rouge">100</code> points.</p>

<p>A small calculus allows us to define the area of a square:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">grid_lat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">max_lat</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">min_lat</span><span class="p">)</span><span class="o">/</span><span class="w"> </span><span class="n">grid_point</span><span class="w">
</span><span class="n">grid_lon</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">max_lon</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">min_lon</span><span class="p">)</span><span class="o">/</span><span class="w"> </span><span class="n">grid_point</span><span class="w"> 
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rbind</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">min_lat</span><span class="p">,</span><span class="w"> </span><span class="n">min_lon</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">min_lat</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">grid_lat</span><span class="p">,</span><span class="w"> </span><span class="n">min_lon</span><span class="p">),</span><span class="w">
           </span><span class="nf">c</span><span class="p">(</span><span class="n">min_lat</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">grid_lat</span><span class="p">,</span><span class="w"> </span><span class="n">min_lon</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">grid_lon</span><span class="p">),</span><span class="w">
           </span><span class="nf">c</span><span class="p">(</span><span class="n">min_lat</span><span class="p">,</span><span class="w"> </span><span class="n">min_lon</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">grid_lon</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">min_lat</span><span class="p">,</span><span class="w"> </span><span class="n">min_lon</span><span class="p">))</span><span class="w">
</span><span class="n">res_square_meter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">geosphere</span><span class="o">::</span><span class="n">areaPolygon</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w">
</span><span class="err">#</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="n">meters</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">grid</span></code></pre></figure>

<p>A density of 6 could be read as exp(6) or 403 points per <code class="highlighter-rouge">53,290</code> square meter or <code class="highlighter-rouge">76</code> points per hectare.</p>

<h2 id="heat-map-per-time-period">Heat Map per Time Period</h2>

<p>Is it possible to define specific place at specific time period?</p>

<p>Let’s have a look at the full time period:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># number of points per day:
</span><span class="n">date_hour_freq</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">coord.df.lim</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">group_by</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">day_week</span><span class="p">,</span><span class="w"> </span><span class="n">hour</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">summarise</span><span class="p">(</span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">())</span><span class="w">

</span><span class="n">date_freq</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">date_hour_freq</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">group_by</span><span class="p">(</span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">summarise</span><span class="p">(</span><span class="n">count_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">

</span><span class="c1"># We add the top line for the date
</span><span class="n">max_hour_freq</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">date_hour_freq</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">group_by</span><span class="p">(</span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">summarise</span><span class="p">(</span><span class="n">max_hour_freq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">

</span><span class="c1"># an hour is arbitrarily choosen among the top hours
</span><span class="n">date_freq_max_hour</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">date_hour_freq</span><span class="p">,</span><span class="w"> </span><span class="n">date_freq</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"date"</span><span class="p">),</span><span class="w">
    </span><span class="n">max_hour_freq</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"date"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">filter</span><span class="p">(</span><span class="n">count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">max_hour_freq</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">group_by</span><span class="p">(</span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">slice</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w">

</span><span class="c1"># Let's represent it on a graph:
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date_freq_max_hour</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">date</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_line</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hour</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_date</span><span class="p">(</span><span class="n">date_breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1 month"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">45</span><span class="p">))</span></code></pre></figure>

<p><img src="http://yvescr.github.io/assets/images/figures/source/2017-01-15-google_map_our_article/unnamed-chunk-6-1.png" alt="plot of chunk unnamed-chunk-6" /></p>

<p>In a strange way, no data appear between November 2015 and March 2016.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">hour_freq</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">date_hour_freq</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">hour</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">summarise</span><span class="p">(</span><span class="n">freq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">
            
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">hour_freq</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hour</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">freq</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_col</span><span class="p">()</span></code></pre></figure>

<p><img src="http://yvescr.github.io/assets/images/figures/source/2017-01-15-google_map_our_article/unnamed-chunk-7-1.png" alt="plot of chunk unnamed-chunk-7" /></p>

<p>The time stamp is mainly associated with hours between 6 and 10 in the afternoon.
It seems logic to me, as it is the time of the day when I am the most active.
More astonishing, there is points registered during the night. It may be nice to create a heat map per hour to see if we can predict where I will be at certain hours:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Heatmap per hour
# plot the graph:
</span><span class="n">map_by_hour</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggmap</span><span class="o">::</span><span class="n">ggmap</span><span class="p">(</span><span class="n">my_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="c1">#  geom_density2d(data = coord.df.lim.2, 
</span><span class="w">    </span><span class="c1">#    aes(x = lon, y = lat), size = 0.3) +
</span><span class="w">     </span><span class="n">stat_density2d</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coord.df.lim.2</span><span class="p">,</span><span class="w"> 
      </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lon</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lat</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">..level..</span><span class="p">)),</span><span class="w">
      </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">grid_point</span><span class="p">,</span><span class="w">
      </span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"polygon"</span><span class="p">,</span><span class="w">
      </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">scale_fill_gradient</span><span class="p">(</span><span class="s2">"Density\nlog scale"</span><span class="p">,</span><span class="w"> </span><span class="n">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"green"</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
    </span><span class="n">theme_map_london</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">hour</span><span class="p">)</span><span class="w">

</span><span class="n">ggsave</span><span class="p">(</span><span class="n">plot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map_by_hour</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"map_by_hour.png"</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="n">dpi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">300</span><span class="p">)</span></code></pre></figure>

<p>As we can see on <a href="https://data-laborer.eu/assets/images/special/map_by_hour.png">that graph</a>, I am pretty quiet during the night, wake up at Acton between 8 and 9 and run around London the rest of the day, coming back home between 7 and 10 p.m..</p>

<p>Is there a discretisation that can be done per day?</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">week_freq</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">date_hour_freq</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">day_week</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">summarise</span><span class="p">(</span><span class="n">freq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">count</span><span class="p">))</span><span class="w">

</span><span class="n">ggplot</span><span class="p">(</span><span class="n">week_freq</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">day_week</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">freq</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_col</span><span class="p">()</span></code></pre></figure>

<p><img src="http://yvescr.github.io/assets/images/figures/source/2017-01-15-google_map_our_article/unnamed-chunk-9-1.png" alt="plot of chunk unnamed-chunk-9" /></p>

<p>I have more data stored for Saturday and Sunday, which seems normal, as it is the days where I use Google map the most.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Heatmap per weekday
# plot the graph:
</span><span class="n">ggmap</span><span class="o">::</span><span class="n">ggmap</span><span class="p">(</span><span class="n">my_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="c1"># geom_density2d(data = coord.df.lim.2, 
</span><span class="w">      </span><span class="c1"># aes(x = lon, y = lat), size = 0.3) +
</span><span class="w">    </span><span class="n">stat_density2d</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coord.df.lim.2</span><span class="p">,</span><span class="w"> 
      </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lon</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lat</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">..level..</span><span class="p">)),</span><span class="w">
      </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">grid_point</span><span class="p">,</span><span class="w">
      </span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"polygon"</span><span class="p">,</span><span class="w">
      </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">scale_fill_gradient</span><span class="p">(</span><span class="s2">"Density\nlog scale"</span><span class="p">,</span><span class="w"> </span><span class="n">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"green"</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
    </span><span class="n">theme_map_london</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">day_week</span><span class="p">)</span></code></pre></figure>

<p><img src="http://yvescr.github.io/assets/images/figures/source/2017-01-15-google_map_our_article/unnamed-chunk-10-1.png" alt="plot of chunk unnamed-chunk-10" /></p>

<p>It reflects well a typical day: I am generally out in Monday and Wednesday, so I stay still in Tuesday. Saturday and especially Sunday are days where I move a lot around London.</p>

<h2 id="activity">Activity</h2>

<p>In the data set, we also can find a variable activity which is a list of activities, not really well define.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Number of rows with an activity:
</span><span class="n">comp_activity</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="m">1</span><span class="o">-</span><span class="n">sapply</span><span class="p">(</span><span class="n">coord.df.lim</span><span class="o">$</span><span class="n">activitys</span><span class="p">,</span><span class="w"> </span><span class="n">is.null</span><span class="p">))</span><span class="w">
</span><span class="c1"># Percentage of rows with an activity:
</span><span class="n">pct_activity</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"%.1f%%"</span><span class="p">,</span><span class="w"> </span><span class="n">comp_activity</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">coord.df.lim</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">100</span><span class="p">)</span></code></pre></figure>

<p>Over <code class="highlighter-rouge">4,072</code> rows are completed with a list of activity. It represents <code class="highlighter-rouge">38.8%</code> of the rows.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># reshape the dataset:
</span><span class="n">index_non_null</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">which</span><span class="p">(</span><span class="o">!</span><span class="n">sapply</span><span class="p">(</span><span class="n">coord.df.lim</span><span class="o">$</span><span class="n">activitys</span><span class="p">,</span><span class="w"> </span><span class="n">is.null</span><span class="p">))</span><span class="w">
</span><span class="n">activities_df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plyr</span><span class="o">::</span><span class="n">ldply</span><span class="p">(</span><span class="n">index_non_null</span><span class="p">,</span><span class="w">
  </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">coord.df.lim</span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"timestampMs"</span><span class="p">,</span><span class="w"> </span><span class="s2">"lat"</span><span class="p">,</span><span class="w"> </span><span class="s2">"lon"</span><span class="p">)],</span><span class="w">
    </span><span class="n">plyr</span><span class="o">::</span><span class="n">ldply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">coord.df.lim</span><span class="o">$</span><span class="n">activitys</span><span class="p">[[</span><span class="n">x</span><span class="p">]]</span><span class="o">$</span><span class="n">timestampMs</span><span class="p">),</span><span class="w">
      </span><span class="k">function</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">timestamp_act</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coord.df.lim</span><span class="o">$</span><span class="n">activitys</span><span class="p">[[</span><span class="n">x</span><span class="p">]]</span><span class="o">$</span><span class="n">timestampMs</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="w">
               </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coord.df.lim</span><span class="o">$</span><span class="n">activitys</span><span class="p">[[</span><span class="n">x</span><span class="p">]]</span><span class="o">$</span><span class="n">activities</span><span class="p">[[</span><span class="n">y</span><span class="p">]]</span><span class="o">$</span><span class="n">type</span><span class="p">,</span><span class="w">
               </span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">coord.df.lim</span><span class="o">$</span><span class="n">activitys</span><span class="p">[[</span><span class="n">x</span><span class="p">]]</span><span class="o">$</span><span class="n">activities</span><span class="p">[[</span><span class="n">y</span><span class="p">]]</span><span class="o">$</span><span class="n">confidence</span><span class="p">,</span><span class="w">
               </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">)</span><span class="w">
      </span><span class="p">)</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="n">row.names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">

</span><span class="c1"># clean the dates 
</span><span class="n">activities_df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">activities_df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
        </span><span class="n">mutate</span><span class="p">(</span><span class="n">date_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.POSIXct</span><span class="p">(</span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">timestampMs</span><span class="p">)</span><span class="o">/</span><span class="m">1000</span><span class="p">,</span><span class="w">
            </span><span class="n">origin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1970-01-01"</span><span class="p">),</span><span class="w">
            </span><span class="n">date_time_activity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.POSIXct</span><span class="p">(</span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">timestamp_act</span><span class="p">)</span><span class="o">/</span><span class="m">1000</span><span class="p">,</span><span class="w">
            </span><span class="n">origin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1970-01-01"</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
        </span><span class="n">mutate</span><span class="p">(</span><span class="n">diff_minute</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">date_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">date_time_activity</span><span class="p">)</span><span class="o">/</span><span class="m">60</span><span class="p">)</span><span class="w">
</span><span class="n">activities_df_limit</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">activities_df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">90</span><span class="p">)</span></code></pre></figure>

<p>Activities have a time stamps of their own.</p>

<p><code class="highlighter-rouge">79,392</code> activities are recorded, an average of 7 per location. Nevertheless, we can find a confidence variable. If we restrict to only the highly confident time stamps, over 90, we limit to <code class="highlighter-rouge">16,657</code> rows.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">activities_df</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">stat_density</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">diff_minute</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">..count..</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_x_continuous</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Minutes"</span><span class="p">,</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">comma</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Minutes Between Original Timestamp and Activity Timestamp"</span><span class="p">)</span></code></pre></figure>

<p><img src="http://yvescr.github.io/assets/images/figures/source/2017-01-15-google_map_our_article/unnamed-chunk-13-1.png" alt="plot of chunk unnamed-chunk-13" /></p>

<p>Most of the time stamps of the activities are a couple of minutes after the time stamp of the coordinates.
Nevertheless, we can also observe a decreasing sinusoidal trend with peaks at 24h, 48h and 64h.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">activities_df</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">stat_count</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">type</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">comma</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Type of Activity, No Limit on Confidence"</span><span class="p">)</span></code></pre></figure>

<p><img src="http://yvescr.github.io/assets/images/figures/source/2017-01-15-google_map_our_article/unnamed-chunk-14-1.png" alt="plot of chunk unnamed-chunk-14" /></p>

<p>I don’t have a car nor a bike so I was astonished to see so much tags “inVehicle” and “onBicycle”. The reason of so much of these tags is that they are associated to a low confidence. When limiting to a confidence of 90 or above, the activities make finally sense.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">activities_df_limit</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">activities_df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">90</span><span class="p">)</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">activities_df_limit</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">stat_count</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">type</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">comma</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Type of Activity, Limit on Confidence"</span><span class="p">)</span></code></pre></figure>

<p><img src="http://yvescr.github.io/assets/images/figures/source/2017-01-15-google_map_our_article/unnamed-chunk-15-1.png" alt="plot of chunk unnamed-chunk-15" /></p>

<p>Most of my activities are standing and tilting. I tilt when I use my unicycle so it makes sense to have so much and I am still mainly at work and at home.</p>

<p>Is it possible to predict that way if a person has a car or a bike? Yes, definitely.</p>

<p>I have created a graph by type that can <a href="https://data-laborer.eu/assets/images/special/map_by_type.png">be found here</a>.
In that graph, it is possible to check where I am standing still and where I am just passing.</p>


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://yvescr.github.io/tags/#ggmap" class="page__taxonomy-item" rel="tag">ggmap</a><span class="sep">, </span>
    
      
      
      <a href="https://yvescr.github.io/tags/#r" class="page__taxonomy-item" rel="tag">R</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://yvescr.github.io/categories/#data-visualisation" class="page__taxonomy-item" rel="tag">data visualisation</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-01-15T00:00:00+00:00">January 15, 2017</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=SwiftAMHE&text=Visualisation of my Google Map History https://yvescr.github.io/data%20visualisation/google_map_our_article/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://yvescr.github.io/data%20visualisation/google_map_our_article/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://yvescr.github.io/data%20visualisation/google_map_our_article/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://yvescr.github.io/data%20visualisation/google_map_our_article/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="https://yvescr.github.io/hack/embedocputest/" class="pagination--pager" title="Include R Output in your Blog Pages with Opencpu
">Previous</a>
    
    
      <a href="https://yvescr.github.io/hack/french/r/Article_embeded_map_choice/" class="pagination--pager" title="Cartographie des activités francaises par département(French article)
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
    <h4 class="page__comments-title">Leave a Comment</h4>
    <section id="disqus_thread"></section>
  
</div>
    
  </article>

  
  
    <div class="page__related">
      
        <h4 class="page__related-title">You May Also Enjoy</h4>
      
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://yvescr.github.io/assets/images/Eugene_Ivanov_2091.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://yvescr.github.io/hack/french/r/Article_embeded_map_choice/" rel="permalink">Cartographie des activités francaises par département(French article)
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-calendar-o" aria-hidden="true"></i> Feb 25, 2017  &nbsp; <i class="fa fa-clock-o" aria-hidden="true"></i> 




  38 minute read
 </p>
	        
    <p class="archive__item-excerpt" itemprop="description">An API to map french activity by department
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://yvescr.github.io/assets/images/TheRapeofEuropa.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://yvescr.github.io/hack/embedocputest/" rel="permalink">Include R Output in your Blog Pages with Opencpu
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-calendar-o" aria-hidden="true"></i> Nov 27, 2016  &nbsp; <i class="fa fa-clock-o" aria-hidden="true"></i> 




  1 minute read
 </p>
	        
    <p class="archive__item-excerpt" itemprop="description">Short exemple of how to include R output in a blog post with opencpu
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://yvescr.github.io/assets/images/flexocpu.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://yvescr.github.io/r/Flexocpu/" rel="permalink">Dashboarding with Flexdashboard and Opencpu
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-calendar-o" aria-hidden="true"></i> Oct 31, 2016  &nbsp; <i class="fa fa-clock-o" aria-hidden="true"></i> 




  6 minute read
 </p>
	        
    <p class="archive__item-excerpt" itemprop="description">How to use opencpu as a back end for flexdashboard
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://yvescr.github.io/assets/images/earl.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://yvescr.github.io/earl/EARL_2016_review/" rel="permalink">EARL 2016 Review
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-calendar-o" aria-hidden="true"></i> Sep 20, 2016  &nbsp; <i class="fa fa-clock-o" aria-hidden="true"></i> 




  12 minute read
 </p>
	        
    <p class="archive__item-excerpt" itemprop="description">EARL 2016 review
</p>
  </article>
</div>
        
      </div>
    </div>
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/SwiftAMHE"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/YvesCR"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://yvescr.github.io/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2017 Yves Crutain. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://yvescr.github.io/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-71940303-1', 'auto');
  ga('send', 'pageview');
</script>






  
  <script type="text/javascript">
  	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  	var disqus_shortname = 'datalaborereu';

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function() {
  		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  	})();

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function () {
  		var s = document.createElement('script'); s.async = true;
  		s.type = 'text/javascript';
  		s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  		(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  	}());
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






  </body>
</html>
